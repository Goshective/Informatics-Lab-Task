# Лабораторная работа 
### Управление вводом/выводом. Конвейерная обработка
## Теория

Базовые команды перенаправления ввода-вывода.

У консольных программ есть три стандартных потока ввода-вывода: `stdin`, `stdout` и `stderr`.

Эти потоки можно перенаправлять и комбинировать, например, чтобы вывод одной программы
подавался на вход другой, а ошибки передавались в отдельный файл.

Команда `echo` выведет строку, переданную ей в аргументах прямиком в стандартный вывод:
Можно перенаправить вывод `echo` вместо стандартного вывода в файл:

```bash
echo hello,world! > hello.txt
```

Если запустить команду несколько раз, можно заметить что файл `hello.txt` каждый раз перезаписывается.
Чтобы не перезаписывать файл, а добавить вывод в его конец, надо использовать `>>` вместо `>` :

```bash
echo hello,world! >> hello.txt
```

Можно также перенаправить наоборот, стандартный ввод, и читать данные не из консоли, а из файла.
Возьмем созданный предыдущей командой файл `hello.txt`, и передадим его на вход утилите `grep` для поиска запятых:

```bash
grep "," < hello.txt
```

Чтобы перенаправить вывод одной команды на вход другой, можно воспользоваться оператором `|` (`pipe`).
В следующем примере мы подаем в стандартный вывод содержимое файла `hello.txt`, 
стандартный вывод попадает на вход утилите `uniq`, которая оставит от него только уникальные строчки,
и, опять же, передаст на стандартный вывод, который, в свою очередь, будет перехвачен командой `grep`.
Она найдет в этом выводе все запятые и напечатает в `stdout`, уже никем не перехваченный:

```bash
cat hello.txt | uniq | grep ","
```

Что если утилита cat не найдет файл? Она напечатает ошибку в стандартный вывод ошибок.
Чтобы не смешивать содержимое файла и ошибки чтения, все ошибки можно перенаправить в отдельный файл, 
или вообще заглушить. В этом примере ошибки пишутся в файл error.txt, а стандартный вывод перехватывается grep:

```bash
cat hello.txt hello2.txt 2> error.txt | grep ","
```

Таким же образом можно перенаправить стандартный вывод, тогда `grep` ничего не достанется, 
а весь вывод попадет в output.txt:

```bash
cat hello.txt hello2.txt 2> error.txt 1> output.txt | grep ","
```

Обратите внимание, что ```cat hello.txt hello2.txt > output.txt``` перенаправит только стандартный вывод в файл `output.txt`,
ошибки продолжат писаться в стандартный вывод ошибок (консоль). Чтобы перенаправить и стандартный вывод, и ошибки
в один файл, можно воспользоваться конструкцией &>. Тут мы направляем стандартный вывод 
в файл `output.txt`, а `stderr` - в `stdout` (порядок важен):

```bash
cat hello.txt hello2.txt > output.txt 2>&1
```

### *Дополнительно*

Помимо дескрипторов 0, 1 и 2, можно открывать другие файлы под другими дескрипторами, и использовать их в перенаправлении
ввода-вывода. Например такой скрипт откроет файл `hello.txt` под дескриптором 3, прочитает из него через `grep`, и закроет дескриптор:

```bash
exec 3<> hello.txt
grep "," <&3
exec 3>&-
```


## Задание лабораторной работы

Напишите команду-однострочник, которая пройдется по всем файлам в папке, посчитает в каждом из них количество слов и выведет в файл `result.txt`.
Также все ошибки доступа (если доступ к файлу запрещен) должны быть выведены в файл `errors.txt`.

### Как успешно сдать работу?

Создать свой репозиторий из шаблона этого. Как это делается - "Use this template" -> "Create a new repository" и сделайте его public. 

Находясь уже в своем репозитории - создайте новый файл формата .md и там оформляйте отчет. В отчете опишите все шаги которые вы делали, чтобы получить финальный результат работы. Необходимы только скриншоты скрипта и примера его выполнения!

Что вам нужно знать, чтобы успешно защитить работу:

Переменные; как выполнять операции; условные конструкции; функции; циклы; как работать с массивом; как посмотреть права доступа к файлам; как выдавать права доступа; что такое и зачем нужен ip адрес и маска подсети.

## Дополнительные источники

1. [Присваивание значений переменным.](https://se.ifmo.ru/~ad/Documentation/ABS_Guide_ru.html#VARASSIGNMENT)
2. [Подстановка переменных.](https://se.ifmo.ru/~ad/Documentation/ABS_Guide_ru.html#VARSUBN)
3. [Арифметические операции.](https://se.ifmo.ru/~ad/Documentation/ABS_Guide_ru.html#ARITHEXP)
4. [Проверка условий.](https://se.ifmo.ru/~ad/Documentation/ABS_Guide_ru.html#TESTS)
5. stackoverflow.com
6. Хорошая ĸнига по Shell/bash в Linux - "Learn Linux Shell Scripting – Fundamentals of Bash 4.4" Sebastiaan
Tammer
7. [Функции.](https://se.ifmo.ru/~ad/Documentation/ABS_Guide_ru.html#FUNCTIONS)
8. [Функции и рекурсивные функции.](https://habr.com/ru/company/ruvds/blog/327248/)
9. [Циклы.](https://se.ifmo.ru/~ad/Documentation/ABS_Guide_ru.html#LOOPS)
10. [Массивы](https://se.ifmo.ru/~ad/Documentation/ABS_Guide_ru.html#ARRAYS)
11. [Про двоичную систему и IP-адрес](https://zametkinapolyah.ru/kompyuternye-seti/4-4-dvoichnye-chisla-i-dvoichnaya-sistema-schisleniya-perevod-chisla-v-dvoichnuyu-sistemu-schisleniya-iz-desyatichnoj.html)
12.  В. Олифер, Н. Олифер "Компьютерные сети. Принципы, технологии, протоколы. Учебник" (2016)
